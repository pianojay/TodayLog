ì´ì „ì˜ ì“°ë ˆê¸°ëŠ” old_ros2_ws ë¡œ ì˜®ê¹€.

ì˜¤ëŠ˜ì€ iAHRS IMUë¥¼ ê°œí†µí•  ê±°ì—ìš”.

vscode ì„¤ì¹˜ (ê·¸ëƒ¥)

driver ì„¤ì¹˜ (ë‚˜ëŠ” silicon labs ì—ì„œ ë‹¤ìš´ë¡œë“œ, make í•¨) (ê·¸ëŸ°ë° ì´ë¯¸ ê¹”ë ¤ìˆì—ˆë˜ ê²ƒë„ ê°™ë‹¤. ë­ ì•Œì•„ì„œ í™•ì¸)
minicom ì„¤ì¹˜ -> serial í†µì‹  í™•ì¸
    ì„¤ì •ì€ hardware flow control ì„ yes -> no ë¡œ ë°”ê¾¸ëŠ” ê²ƒ ì™¸ì—ëŠ” ê·¸ëŒ€ë¡œ ë‘¬ë„ ë¬´ê´€.


https://github.com/wookbin/iahrs_driver_ros2
ê·¸ ë‹¤ìŒì— iarhs ros2ë¥¼ ì¹œì ˆíˆ ë”°ë¼í•˜ë©´ ë©ë‹ˆë‹¤. (interface ë¹Œë“œ í›„ driver ë¹Œë“œ)
/tf í™•ì¸, Rviz2ì—ì„œ fixed frameì„ map ì—ì„œ base_linkë¡œ ì„¤ì •.

ros2 launch iahrs_driver iahrs_driver.py

####

ì´ì œ RTK GNSSë¥¼ í•  ì°¨ë¡€ì—ìš”.

https://github.com/aussierobots/ublox_dgnss 
ublox_dgnss ë¥¼ ì„¤ì¹˜í•˜ëŠ”ë°, ì—¬ê¸°ëŠ”  rtcm_msgì— ì˜ì¡´í•œë‹¤.
https://github.com/tilk/rtcm_msgs


colcon list -> ë¹Œë“œí•  ìˆ˜ ìˆëŠ” ê²ƒ ëª©ë¡
colcon build --packages-select ???? -> ì„ íƒ ë¹Œë“œ (ì›í•œë‹¤ë©´)

####
USB ì ‘ê·¼ ê·œì¹™ ì‘ì„±:
sudo vim /etc/udev/rules.d/99-ublox-gnss.rules

#UBLOX ZED-F9
ATTRS{idVendor}=="1546", ATTRS{idProduct}=="01a9", MODE="0666", GROUP="plugdev"

ì ìš©:
sudo udevadm control --reload-rules
sudo udevadm trigger

ê¶Œí•œê´€ë ¨:
sudo usermod -aG plugdev $USER
sudo usermod -a -G dialout $USER
newgrp dialout

ls -l /dev/serial/by-id/

ì™œ usbê°€ ë¬¸ì œì¸ê°€!!!



####

ë­˜ í•  ìˆ˜ ìˆë‹ˆ?
ros2 run <package_name> --print
ros2 pkg prefix <package_name>


ğŸ” Summary Table
Purpose	Command
List runnables	ros2 run <pkg> --print
Run executable	ros2 run <pkg> <exec>
Locate package	ros2 pkg prefix <pkg>
List launch files	find $(ros2 pkg prefix <pkg>)/share/<pkg>/launch -name "*.launch.py"
Run launch file	ros2 launch <pkg> <file.launch.py>


ìŒ ì•„ë¬´íŠ¼.


Device Identification Parameters
https://github.com/aussierobots/ublox_dgnss?tab=readme-ov-file#device-identification-parameters

launch íŒŒë¼ë¯¸í„° DEVICE_SERIAL_STRING: CFG-USB-SERIAL_NO_STRx -> ì´ê²Œ ì´ë¦„ ì—­í• ì„ í•œë‹¤.



ublox zed f9p ë¥¼ config (flash) í•˜ê¸° ìœ„í•´ì„œëŠ” ê³µì‹ ë„êµ¬ì¸ u-center (windows) ë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆë‹¤.
ê·¸ëŸ°ë° Ubuntuì—ì„œ ì“°ê¸° ìœ„í•´ì„œ ëŒ€ìš©ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤. -> PyGPSClientë¥¼ ì“´ë‹¤.

python3 -m pip install --upgrade pygpsclient
pygpsclient

https://github.com/semuconsulting/PyGPSClient#ubxconfig

ì—¬ê¸°ì„œ factory reset ì´ë‚˜ ntrip í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ì„ í•´ë³¼ ìˆ˜ë„ ìˆë‹¤.
ê·¸ëŸ°ë° ì–´ì°¨í”¼ ì˜ ì•ˆë˜ë‹ˆê¹Œ ìœˆë„ìš°ì— u-centerë¥¼ ì“°ì. (cfg get set)

If you want to see if the UBX device has received and processed the RTCM data run this, after ensuring that CFG_MSGOUT_UBX_RXM_RTCM_USB is set to 1 via rqt

Ensure CFG_MSGOUT_UBX_NAV_STATUS_USB is set to 1. It is lower priority message but can be used to determine what type of GPS fix and the type of differential error correction that has been supplied.


<NTRIP í´ë¼ì´ì–¸íŠ¸>: RTCM ì •ë³´ë¥¼ ì™¸ë¶€ì—ì„œ ë°›ê³  ì‹¶ë‹¤ë©´ ì´ê±¸ ì‚¬ìš©í•œë‹¤. (www.gnssdata.or.kr)

ros2 launch ublox_dgnss ntrip_client.launch.py \
use_https:=false host:=www.gnssdata.or.kr port:=2101 mountpoint:=DAEJ-RTCM30 \
username:=pianojay@naver.com password:=gnss

ì´ì œ <ë¡œë²„ì™€ ë² ì´ìŠ¤>ë¥¼ ì‹œë®¬ë ˆì´ì…˜ í•´ì•¼ í•œë‹¤.

tree src/ublox_dgnss/ublox_dgnss:
src/ublox_dgnss/ublox_dgnss
â”œâ”€â”€ CHANGELOG.rst
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ launch
â”‚Â Â  â”œâ”€â”€ ntrip_client.launch.py						-> DAEJ-RTCM30 ì—ì„œ ntrip ë°›ê¸°
â”‚Â Â  â”œâ”€â”€ ublox_fb+r_base.launch.py					-> fixed base; base
â”‚Â Â  â”œâ”€â”€ ublox_fb+r_rover.launch.py					-> fixed base; rover
â”‚Â Â  â”œâ”€â”€ ublox_mb+r_base.launch.py					-> moving base; base
â”‚Â Â  â”œâ”€â”€ ublox_mb+r_rover.launch.py					-> moving base; rover
â”‚Â Â  â”œâ”€â”€ ublox_rover_hpposecef.launch.py				-> rover; ECEF (XYZ)ì¢Œí‘œê³„
â”‚Â Â  â”œâ”€â”€ ublox_rover_hpposllh.launch.py				-> rover
â”‚Â Â  â”œâ”€â”€ ublox_rover_hpposllh_navsatfix.launch.py	-> rover; navsatfix format
â”‚Â Â  â””â”€â”€ ublox_rover_hpposllh_satellite.launch.py	-> rover; + satellite info
â””â”€â”€ package.xml


ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´:

ros2 launch ublox_dgnss ublox_fb+r_base.launch.py \
device_serial_string:=StationRx frame_id:=gps_station_link namespace:=station

ros2 launch ublox_dgnss ublox_fb+r_rover.launch.py \
device_serial_string:=NorthRx namespace:=rover_north frame_id:=gps_north_link

ros2 launch ublox_dgnss ublox_fb+r_rover.launch.py \
device_serial_string:=SouthRx namespace:=rover_south frame_id:=gps_south_link 

--show-args


ros2 node list
ros2 param set /base/ublox_dgnss CFG_MSGOUT_UBX_RXM_RTCM_USB 1
ros2 param set /base/ublox_dgnss CFG_MSGOUT_UBX_NAV_STATUS_USB 1
ros2 param set /rover/ublox_dgnss CFG_MSGOUT_UBX_RXM_RTCM_USB 1
ros2 param set /rover/ublox_dgnss CFG_MSGOUT_UBX_NAV_STATUS_USB 1
(ê·¼ë° ublox_fb+r_rover.launch.py ë³´ë‹ˆê¹Œ default parameterê°€ ì´ë¯¸ ì˜ ë˜ì–´ ìˆìœ¼ë‹ˆ ìœ„ëŠ” ë¬´ì‹œí•´ë„ ëœë‹¤)

ros2 topic echo /rover/fix -> ì´ê²Œ ì¡´ì¬í•´ì•¼ í•¨
ros2 topic echo /rover/ubx_rxm_rtcm -> ì´ê²Œ ë– ì•¼ í•¨.
ros2 topic echo /rover/ubx_nav_status
ros2 topic echo /rover/ubx_nav_hp_pos_llh

ì—­ì‹œ ì‹¤ë‚´ëŠ” ì˜ ì•ˆ ë˜ëŠ” êµ¬ë‚˜

USBê°€ ì˜ ì•ˆëœë‹¤ë©´ ìµœì‹  ë²„ì „ìœ¼ë¡œ ë‹¤ì‹œ í´ë¡ í•´ ë³´ì.


ë‚˜ì¤‘ì—: baseì— ë‘ ê°œ ìˆìœ¼ë¯€ë¡œ launch param ì— namespace ë³€ê²½ (rover_north / rover_south)


ì„œë²„ êµ¬ì¶•í•˜ê¸°:



RPië¥¼ base server ë¡œ í•œë‹¤.



